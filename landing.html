<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Memoir — Home</title>
<link rel="stylesheet" href="/styles.css"/>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.1/dist/umd/supabase.js"></script>
<style>
  /* Page-specific tweaks; theme variables come from styles.css */
  .hero{display:grid;grid-template-columns:1.15fr .85fr;gap:18px;margin-top:14px}
  .hero .pic{background:#ddd;border-radius:22px;overflow:hidden;box-shadow:var(--mk-shadow);min-height:420px}
  .hero .pic img{display:block;width:100%;height:100%;object-fit:cover;filter:contrast(1.02) saturate(.96)}
  .actions{display:grid;gap:14px}
  .card-title{margin:2px 0 6px}
  .features{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin:20px 0}
  @media (max-width:960px){ .hero{grid-template-columns:1fr} }
</style>
</head>
<body>
  <!-- Shared header injected here -->
  <div id="header-placeholder"></div>

  <main class="wrap">
    <!-- HERO -->
    <section class="hero">
      <div class="pic mk-card" style="padding:0">
        <img id="hero-img" src="/assets/book-1.jpg" alt="Open book">
      </div>

      <div class="actions">
        <div class="mk-card">
          <h2 class="h1" data-i18n="landing.title">Preserve Your Memories Forever</h2>
          <p class="lead" data-i18n="landing.lead">Record once, keep for generations. Start a recording in one tap, add a title and “when it happened”, then share safely with your family.</p>
        </div>

        <article class="mk-card">
          <h3 class="card-title" data-i18n="cards.start.title">Start Recording</h3>
          <p class="lead" data-i18n="cards.start.body">One tap to begin. Add a title and “when it happened” later.</p>
          <a href="/record.html" class="mk-btn mk-primary lg" data-i18n="cards.start.cta">Start Recording</a>
        </article>

        <article class="mk-card">
          <h3 class="card-title" data-i18n="cards.stories.title">View My Stories</h3>
          <p class="lead" data-i18n="cards.stories.body">Browse, rewrite with AI, export, and share with your family.</p>
          <a href="/stories.html" class="mk-btn lg" data-i18n="cards.stories.cta">My Stories</a>
        </article>
      </div>
    </section>

    <!-- FEATURES -->
    <section class="features">
      <div class="mk-card">
        <h4 data-i18n="feat.smart.t">Smart Transcription</h4>
        <p class="lead" data-i18n="feat.smart.b">Server-side Whisper for accurate EN/FR/NL/ES.</p>
      </div>
      <div class="mk-card">
        <h4 data-i18n="feat.guided.t">Guided or Free</h4>
        <p class="lead" data-i18n="feat.guided.b">Use gentle prompts or speak freely.</p>
      </div>
      <div class="mk-card">
        <h4 data-i18n="feat.private.t">Private Library</h4>
        <p class="lead" data-i18n="feat.private.b">Your stories and media stay in your account.</p>
      </div>
    </section>

    <div class="footnote">© Memoir App — built for families</div>
  </main>

<script>
/* Supabase client for header auth banner */
const SUPABASE_URL = "https://jrjqciywlijhhcxfxywh.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpyanFjaXl3bGlqaGhjeGZ4eXdoIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1MDQ2NzEsImV4cCI6MjA3MTA4MDY3MX0.5FeQxu_N7q-1Br00yJu4E-TKTZK4U4ZnJ4jpRo7Atak";
window.sb = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY, {auth:{persistSession:true}});

/* Inject shared header and apply language */
fetch('/header.html').then(r=>r.text()).then(html=>{
  document.getElementById('header-placeholder').innerHTML = html;
  window.i18n && i18n.apply(document);
});

/* Hero image rotation (every 30s) */
const imgs = ['/assets/book-1.jpg','/assets/book-2.jpg','/assets/book-3.jpg'];
let ix = 0;
setInterval(()=>{
  ix = (ix+1)%imgs.length;
  const el = document.getElementById('hero-img');
  if(el) el.src = imgs[ix];
}, 30000);

/* Re-apply translations on change */
document.addEventListener('memoir:lang', ()=> window.i18n && i18n.apply(document));
</script>
</body>
</html>
