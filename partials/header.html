<header class="site-header bg-cream border-b border-[rgba(0,0,0,.06)]">
  <div class="container">
    <div class="nav">
      <a href="/landing.html" class="brand">
        <span class="brand-logo"></span>
        <div class="brand-text">
          <strong>MEMOIR APP</strong>
          <small>Preserve your memories forever</small>
        </div>
      </a>

      <nav class="nav-links">
        <a class="pill" href="/landing.html">Home</a>
        <a class="pill" href="/login.html">Login</a>
        <a class="pill" href="/record.html">Record</a>
        <a class="pill" href="/stories.html">My Stories</a>

        <!-- Language -->
        <div class="lang pill" data-lang>
          <button class="lang-btn" data-lang-btn>
            <span class="flag" id="langFlag">ðŸ‡¬ðŸ‡§</span>
            <span id="langLabel">English</span>
            <svg aria-hidden="true" width="14" height="14" viewBox="0 0 20 20"><path d="M5 7l5 6 5-6" fill="currentColor"/></svg>
          </button>
          <div class="lang-menu hidden" data-lang-menu>
            <button data-set-lang="en">ðŸ‡¬ðŸ‡§ English</button>
            <button data-set-lang="fr">ðŸ‡«ðŸ‡· FranÃ§ais</button>
            <button data-set-lang="nl">ðŸ‡§ðŸ‡ª Nederlands</button>
            <button data-set-lang="es">ðŸ‡ªðŸ‡¸ EspaÃ±ol</button>
          </div>
        </div>
      </nav>
    </div>
  </div>
</header>

<style>
  .container{max-width:1200px;margin:0 auto;padding:12px 16px}
  .site-header{position:sticky;top:0;z-index:50;backdrop-filter:saturate(1.2) blur(4px)}
  .nav{display:flex;align-items:center;justify-content:space-between;gap:16px}
  .brand{display:flex;align-items:center;gap:10px;color:inherit;text-decoration:none}
  .brand-logo{width:32px;height:32px;border-radius:9px;background:linear-gradient(135deg,#b98a5a,#6a4630)}
  .brand-text small{display:block;opacity:.7;font-size:12px;margin-top:-2px}
  .nav-links{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .pill{padding:10px 16px;border-radius:999px;border:1px solid rgba(0,0,0,.08);background:#fff;text-decoration:none}
  .pill:hover{box-shadow:0 1px 0 rgba(0,0,0,.06)}
  .lang{position:relative}
  .lang-btn{display:flex;align-items:center;gap:8px;background:none;border:0}
  .lang-menu{position:absolute;right:0;top:110%;background:#fff;border:1px solid rgba(0,0,0,.1);border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,.08);padding:8px;min-width:160px}
  .lang-menu.hidden{display:none}
  .lang-menu button{display:flex;gap:8px;align-items:center;width:100%;padding:8px 10px;border:0;background:transparent;text-align:left;border-radius:10px}
  .lang-menu button:hover{background:rgba(0,0,0,.04)}
  .flag{font-size:16px}
</style>

<script>
// language behavior â€“ relies on /js/lang.js if present, but also updates the label/flag
(function(){
  const label = document.getElementById('langLabel');
  const flag  = document.getElementById('langFlag');
  const map = { en:['English','ðŸ‡¬ðŸ‡§'], fr:['FranÃ§ais','ðŸ‡«ðŸ‡·'], nl:['Nederlands','ðŸ‡§ðŸ‡ª'], es:['EspaÃ±ol','ðŸ‡ªðŸ‡¸'] };

  function apply(code){
    const [name,emoji] = map[code] || map.en;
    label && (label.textContent = name);
    flag  && (flag.textContent  = emoji);
    try {
      localStorage.setItem('memoir.lang', code);
      window.dispatchEvent(new CustomEvent('memoir:lang', { detail:{ code } }));
    } catch {}
  }

  document.addEventListener('click',(e)=>{
    const btn = e.target.closest('[data-set-lang]');
    if(!btn) return;
    apply(btn.getAttribute('data-set-lang'));
  });

  const saved = (()=>{
    try { return localStorage.getItem('memoir.lang') || 'en'; } catch { return 'en'; }
  })();
  apply(saved);
})();
</script>
