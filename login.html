<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Login â€” Memoir</title>
  <link rel="stylesheet" href="/styles.css"/>
</head>
<body class="mk-theme-vintage">
  <div id="site-header"></div>

  <main class="mk-container">
    <section class="mk-auth">
      <h1 data-i18n="nav.login">Login</h1>
      <form id="loginForm" class="mk-auth__form">
        <input id="email" type="email" class="mk-input" placeholder="you@example.com" required/>
        <input id="password" type="password" class="mk-input" placeholder="********" required/>
        <button class="mk-btn mk-btn-primary" type="submit" data-i18n="nav.login">Login</button>
      </form>
    </section>
  </main>

  <script>
    // window.SUPABASE_URL = "https://YOUR-PROJECT.supabase.co";
    // window.SUPABASE_ANON_KEY = "YOUR_PUBLIC_ANON_KEY";
  </script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="/header-loader.js"></script>
  <script src="/app.js"></script>

  <script>
    // Optional: simple email/password flow
    (function(){
      if (!window.SUPABASE_URL || !window.SUPABASE_ANON_KEY) return;
      const sb = supabase.createClient(window.SUPABASE_URL, window.SUPABASE_ANON_KEY);
      const form = document.getElementById('loginForm');
      form?.addEventListener('submit', async (e)=>{
        e.preventDefault();
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value;
        try{
          const { data, error } = await sb.auth.signInWithPassword({ email, password });
          if (error) throw error;
          // Redirect to My Stories if already logged in
          location.href = '/stories.html';
        }catch(err){ alert(err.message || String(err)); }
      });
    })();
  </script>
</body>
</html>
