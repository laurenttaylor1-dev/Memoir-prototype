<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Set new password â€” Memoir</title>

  <!-- Supabase config via meta (same values as elsewhere) -->
  <meta name="supabase-url"  content="https://fswxkujxusdozvmpyvzk.supabase.co">
  <meta name="supabase-anon" content="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZzd3hrdWp4dXNkb3p2bXB5dnprIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgxMTk3MTYsImV4cCI6MjA3MzY5NTcxNn0.kNodFgDXi32w456e475fXvBi9eehX50HX_hVVTDBtXI">

  <link rel="stylesheet" href="/styles.css"/>
  <style>
    :root{--bg:#f6f1ea;--card:#fffaf5;--ink:#3b2f2a;--muted:#7b6a62;--accent:#8c5a3c;--accent2:#b17d55;--radius:18px;--shadow:0 18px 40px rgba(59,47,42,.10),0 2px 8px rgba(59,47,42,.06)}
    body{background:var(--bg);color:var(--ink);margin:0;font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
    main{min-height:calc(100vh - 160px);display:flex;align-items:center;justify-content:center;padding:16px}
    .login-card{background:#fff;border:1px solid rgba(0,0,0,.08);border-radius:18px;box-shadow:0 18px 40px rgba(59,47,42,.10),0 2px 8px rgba(59,47,42,.06);padding:18px}
    .field input{width:100%;padding:12px 14px;border-radius:12px;border:1px solid rgba(0,0,0,.15);background:#fff;box-sizing:border-box}
    .actions{display:flex;gap:10px;margin-top:10px}
    .btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:12px 16px;border-radius:999px;border:1px solid rgba(0,0,0,.12);background:#fff;color:var(--ink);font-weight:700;cursor:pointer;text-decoration:none}
    .btn.primary{background:linear-gradient(90deg,var(--accent),var(--accent2));color:#fff;border:0}
    .status{margin-top:10px;min-height:1.1em}
    .muted{color:var(--muted)}
  </style>
</head>
<body>
  <div id="site-header"></div>

  <main>
    <section style="width:100%;max-width:520px;">
      <h1 class="title" style="text-align:center;margin:0 0 18px;">Set a new password</h1>
      <form id="newpass-form" class="login-card" novalidate>
        <div class="field"><input id="password" type="password" placeholder="New password (min 6 chars)" required/></div>
        <div class="field"><input id="password2" type="password" placeholder="Confirm new password" required/></div>
        <div class="actions"><button id="updateBtn" class="btn primary" type="submit" style="flex:1">Update password</button></div>
        <div id="status" class="status muted"></div>
      </form>
    </section>
  </main>

  <div id="site-footer"></div>

  <!-- External scripts only -->
  <script src="/js/header-loader.js" defer></script>
  <script src="/js/footer-loader.js" defer></script>
  <script src="/js/auth-client.js" defer></script>
  <script src="/js/auth-reset.js" defer></script>
</body>
</html>
